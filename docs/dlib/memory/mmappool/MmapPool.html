<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8"/>
		<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0"/>
		<title>Class MmapPool</title>
		<link rel="stylesheet" href="../../../css/style.min.css"/>
		<script type="text/javascript" src="../../../js/script.min.js"></script>
	</head>
	<body onload="setupDdox();">
		<header></header>
		<nav id="main-nav">
			<div>
				<noscript>
					<p style="color: red">The search functionality needs JavaScript enabled</p>
				</noscript>
				<div id="symbolSearchPane" style="display: none">
					<form action="#" method="GET">
						<input id="symbolSearch" type="text" name="q" placeholder="Search for symbols" autocomplete="off" onchange="performSymbolSearch(24);" onkeypress="this.onchange();" onpaste="this.onchange();" oninput="this.onchange();" autofocus/>
					</form>
					<ul id="symbolSearchResults" class="symbolList" style="display: none"></ul><script type="application/javascript" src="../../../symbols.js"></script><script type="application/javascript">var symbolSearchRootDir = "../../../";
document.getElementById('symbolSearchPane').style.display = 'block';</script>
				</div>
				<ul class="tree-view">
					<li class="tree-view ">
						<div class="package ">
							<a href="../../../dlib.html">dlib</a>
						</div>
				<ul class="tree-view">
					<li class="tree-view collapsed">
						<div class="package ">
							<a href="../../../dlib/audio.html">audio</a>
						</div>
				<ul class="tree-view">
					<li class="tree-view collapsed">
						<div class="package ">
							<a href="../../../dlib/audio/io.html">io</a>
						</div>
				<ul class="tree-view">
					<li>
						<div class="module ">
							<a href="../../../dlib/audio/io/wav.html">wav</a>
						</div>
					</li>
				</ul>
					</li>
					<li>
						<div class="module ">
							<a href="../../../dlib/audio/sample.html">sample</a>
						</div>
					</li>
					<li>
						<div class="module ">
							<a href="../../../dlib/audio/sound.html">sound</a>
						</div>
					</li>
					<li>
						<div class="module ">
							<a href="../../../dlib/audio/synth.html">synth</a>
						</div>
					</li>
					<li>
						<div class="module ">
							<a href="../../../dlib/audio/unmanaged.html">unmanaged</a>
						</div>
					</li>
				</ul>
					</li>
					<li class="tree-view collapsed">
						<div class="package ">
							<a href="../../../dlib/coding.html">coding</a>
						</div>
				<ul class="tree-view">
					<li>
						<div class="module ">
							<a href="../../../dlib/coding/hash.html">hash</a>
						</div>
					</li>
					<li>
						<div class="module ">
							<a href="../../../dlib/coding/varint.html">varint</a>
						</div>
					</li>
					<li>
						<div class="module ">
							<a href="../../../dlib/coding/zlib.html">zlib</a>
						</div>
					</li>
				</ul>
					</li>
					<li class="tree-view collapsed">
						<div class="package ">
							<a href="../../../dlib/concurrency.html">concurrency</a>
						</div>
				<ul class="tree-view">
					<li>
						<div class="module ">
							<a href="../../../dlib/concurrency/taskqueue.html">taskqueue</a>
						</div>
					</li>
					<li>
						<div class="module ">
							<a href="../../../dlib/concurrency/threadpool.html">threadpool</a>
						</div>
					</li>
					<li>
						<div class="module ">
							<a href="../../../dlib/concurrency/workerthread.html">workerthread</a>
						</div>
					</li>
				</ul>
					</li>
					<li class="tree-view collapsed">
						<div class="package ">
							<a href="../../../dlib/container.html">container</a>
						</div>
				<ul class="tree-view">
					<li>
						<div class="module ">
							<a href="../../../dlib/container/array.html">array</a>
						</div>
					</li>
					<li>
						<div class="module ">
							<a href="../../../dlib/container/bst.html">bst</a>
						</div>
					</li>
					<li>
						<div class="module ">
							<a href="../../../dlib/container/buffer.html">buffer</a>
						</div>
					</li>
					<li>
						<div class="module ">
							<a href="../../../dlib/container/dict.html">dict</a>
						</div>
					</li>
					<li>
						<div class="module ">
							<a href="../../../dlib/container/linkedlist.html">linkedlist</a>
						</div>
					</li>
					<li>
						<div class="module ">
							<a href="../../../dlib/container/queue.html">queue</a>
						</div>
					</li>
					<li>
						<div class="module ">
							<a href="../../../dlib/container/stack.html">stack</a>
						</div>
					</li>
				</ul>
					</li>
					<li class="tree-view collapsed">
						<div class="package ">
							<a href="../../../dlib/core.html">core</a>
						</div>
				<ul class="tree-view">
					<li>
						<div class="module ">
							<a href="../../../dlib/core/bitio.html">bitio</a>
						</div>
					</li>
					<li>
						<div class="module ">
							<a href="../../../dlib/core/compound.html">compound</a>
						</div>
					</li>
					<li>
						<div class="module ">
							<a href="../../../dlib/core/memory.html">memory</a>
						</div>
					</li>
					<li>
						<div class="module ">
							<a href="../../../dlib/core/mutex.html">mutex</a>
						</div>
					</li>
					<li>
						<div class="module ">
							<a href="../../../dlib/core/oop.html">oop</a>
						</div>
					</li>
					<li>
						<div class="module ">
							<a href="../../../dlib/core/ownership.html">ownership</a>
						</div>
					</li>
					<li>
						<div class="module ">
							<a href="../../../dlib/core/stream.html">stream</a>
						</div>
					</li>
					<li>
						<div class="module ">
							<a href="../../../dlib/core/thread.html">thread</a>
						</div>
					</li>
					<li>
						<div class="module ">
							<a href="../../../dlib/core/tuple.html">tuple</a>
						</div>
					</li>
				</ul>
					</li>
					<li class="tree-view collapsed">
						<div class="package ">
							<a href="../../../dlib/filesystem.html">filesystem</a>
						</div>
				<ul class="tree-view">
					<li>
						<div class="module ">
							<a href="../../../dlib/filesystem/delegaterange.html">delegaterange</a>
						</div>
					</li>
					<li>
						<div class="module ">
							<a href="../../../dlib/filesystem/dirrange.html">dirrange</a>
						</div>
					</li>
					<li>
						<div class="module ">
							<a href="../../../dlib/filesystem/filesystem.html">filesystem</a>
						</div>
					</li>
					<li>
						<div class="module ">
							<a href="../../../dlib/filesystem/local.html">local</a>
						</div>
					</li>
					<li>
						<div class="module ">
							<a href="../../../dlib/filesystem/stdfs.html">stdfs</a>
						</div>
					</li>
				</ul>
					</li>
					<li class="tree-view collapsed">
						<div class="package ">
							<a href="../../../dlib/geometry.html">geometry</a>
						</div>
				<ul class="tree-view">
					<li>
						<div class="module ">
							<a href="../../../dlib/geometry/aabb.html">aabb</a>
						</div>
					</li>
					<li>
						<div class="module ">
							<a href="../../../dlib/geometry/frustum.html">frustum</a>
						</div>
					</li>
					<li>
						<div class="module ">
							<a href="../../../dlib/geometry/intersection.html">intersection</a>
						</div>
					</li>
					<li>
						<div class="module ">
							<a href="../../../dlib/geometry/obb.html">obb</a>
						</div>
					</li>
					<li>
						<div class="module ">
							<a href="../../../dlib/geometry/plane.html">plane</a>
						</div>
					</li>
					<li>
						<div class="module ">
							<a href="../../../dlib/geometry/ray.html">ray</a>
						</div>
					</li>
					<li>
						<div class="module ">
							<a href="../../../dlib/geometry/sphere.html">sphere</a>
						</div>
					</li>
					<li>
						<div class="module ">
							<a href="../../../dlib/geometry/triangle.html">triangle</a>
						</div>
					</li>
					<li>
						<div class="module ">
							<a href="../../../dlib/geometry/trimesh.html">trimesh</a>
						</div>
					</li>
					<li>
						<div class="module ">
							<a href="../../../dlib/geometry/utils.html">utils</a>
						</div>
					</li>
				</ul>
					</li>
					<li class="tree-view collapsed">
						<div class="package ">
							<a href="../../../dlib/math.html">math</a>
						</div>
				<ul class="tree-view">
					<li class="tree-view collapsed">
						<div class="package ">
							<a href="../../../dlib/math/interpolation.html">interpolation</a>
						</div>
				<ul class="tree-view">
					<li>
						<div class="module ">
							<a href="../../../dlib/math/interpolation/bezier.html">bezier</a>
						</div>
					</li>
					<li>
						<div class="module ">
							<a href="../../../dlib/math/interpolation/catmullrom.html">catmullrom</a>
						</div>
					</li>
					<li>
						<div class="module ">
							<a href="../../../dlib/math/interpolation/easing.html">easing</a>
						</div>
					</li>
					<li>
						<div class="module ">
							<a href="../../../dlib/math/interpolation/hermite.html">hermite</a>
						</div>
					</li>
					<li>
						<div class="module ">
							<a href="../../../dlib/math/interpolation/linear.html">linear</a>
						</div>
					</li>
					<li>
						<div class="module ">
							<a href="../../../dlib/math/interpolation/nearest.html">nearest</a>
						</div>
					</li>
					<li>
						<div class="module ">
							<a href="../../../dlib/math/interpolation/smoothstep.html">smoothstep</a>
						</div>
					</li>
				</ul>
					</li>
					<li>
						<div class="module ">
							<a href="../../../dlib/math/combinatorics.html">combinatorics</a>
						</div>
					</li>
					<li>
						<div class="module ">
							<a href="../../../dlib/math/complex.html">complex</a>
						</div>
					</li>
					<li>
						<div class="module ">
							<a href="../../../dlib/math/decomposition.html">decomposition</a>
						</div>
					</li>
					<li>
						<div class="module ">
							<a href="../../../dlib/math/diff.html">diff</a>
						</div>
					</li>
					<li>
						<div class="module ">
							<a href="../../../dlib/math/dual.html">dual</a>
						</div>
					</li>
					<li>
						<div class="module ">
							<a href="../../../dlib/math/dualquaternion.html">dualquaternion</a>
						</div>
					</li>
					<li>
						<div class="module ">
							<a href="../../../dlib/math/fft.html">fft</a>
						</div>
					</li>
					<li>
						<div class="module ">
							<a href="../../../dlib/math/hof.html">hof</a>
						</div>
					</li>
					<li>
						<div class="module ">
							<a href="../../../dlib/math/linsolve.html">linsolve</a>
						</div>
					</li>
					<li>
						<div class="module ">
							<a href="../../../dlib/math/matrix.html">matrix</a>
						</div>
					</li>
					<li>
						<div class="module ">
							<a href="../../../dlib/math/quaternion.html">quaternion</a>
						</div>
					</li>
					<li>
						<div class="module ">
							<a href="../../../dlib/math/sse.html">sse</a>
						</div>
					</li>
					<li>
						<div class="module ">
							<a href="../../../dlib/math/tensor.html">tensor</a>
						</div>
					</li>
					<li>
						<div class="module ">
							<a href="../../../dlib/math/transformation.html">transformation</a>
						</div>
					</li>
					<li>
						<div class="module ">
							<a href="../../../dlib/math/utils.html">utils</a>
						</div>
					</li>
					<li>
						<div class="module ">
							<a href="../../../dlib/math/vector.html">vector</a>
						</div>
					</li>
				</ul>
					</li>
					<li class="tree-view ">
						<div class="package ">
							<a href="../../../dlib/memory.html">memory</a>
						</div>
				<ul class="tree-view">
					<li>
						<div class="module ">
							<a href="../../../dlib/memory/allocator.html">allocator</a>
						</div>
					</li>
					<li>
						<div class="module ">
							<a href="../../../dlib/memory/mallocator.html">mallocator</a>
						</div>
					</li>
					<li>
						<div class="module selected">
							<a href="../../../dlib/memory/mmappool.html">mmappool</a>
						</div>
					</li>
				</ul>
					</li>
					<li class="tree-view collapsed">
						<div class="package ">network
						</div>
				<ul class="tree-view">
					<li>
						<div class="module ">
							<a href="../../../dlib/network/socket.html">socket</a>
						</div>
					</li>
					<li>
						<div class="module ">
							<a href="../../../dlib/network/url.html">url</a>
						</div>
					</li>
				</ul>
					</li>
					<li class="tree-view collapsed">
						<div class="package ">
							<a href="../../../dlib/serialization.html">serialization</a>
						</div>
				<ul class="tree-view">
					<li>
						<div class="module ">
							<a href="../../../dlib/serialization/json.html">json</a>
						</div>
					</li>
				</ul>
					</li>
					<li class="tree-view collapsed">
						<div class="package ">
							<a href="../../../dlib/text.html">text</a>
						</div>
				<ul class="tree-view">
					<li>
						<div class="module ">
							<a href="../../../dlib/text/common.html">common</a>
						</div>
					</li>
					<li>
						<div class="module ">
							<a href="../../../dlib/text/encodings.html">encodings</a>
						</div>
					</li>
					<li>
						<div class="module ">
							<a href="../../../dlib/text/lexer.html">lexer</a>
						</div>
					</li>
					<li>
						<div class="module ">
							<a href="../../../dlib/text/unmanagedstring.html">unmanagedstring</a>
						</div>
					</li>
					<li>
						<div class="module ">
							<a href="../../../dlib/text/utf16.html">utf16</a>
						</div>
					</li>
					<li>
						<div class="module ">
							<a href="../../../dlib/text/utf8.html">utf8</a>
						</div>
					</li>
					<li>
						<div class="module ">
							<a href="../../../dlib/text/utils.html">utils</a>
						</div>
					</li>
				</ul>
					</li>
				</ul>
					</li>
				</ul>
			</div>
			<p id="main-nav-footer">
				Built with
				<a href="https://github.com/MartinNowak/scod">scod</a>
			</p>
		</nav>
		<div id="main-contents">
			<div>
				<h1>Class MmapPool</h1><p>This allocator allocates memory in regions (multiple of 4 KB for example).
 Each region is then splitted in blocks. So it doesn't request the memory
 from the operating system on each call, but only if there are no large
 enough free blocks in the available regions.
 Deallocation works in the same way. Deallocation doesn't immediately
 gives the memory back to the operating system, but marks the appropriate
 block as free and only if all blocks in the region are free, the complete
 region is deallocated.
</p>
				<div class="prototype">
					<code class="lang-d">
						<div class="single-prototype">
				<span class="kwd">class</span> <span class="typ">MmapPool</span>
				<br>&nbsp;&nbsp;: <a href="../../../dlib/memory/allocator/Allocator.html"><span class="typ">Allocator</span></a>
				<span class="pun">;</span>
						</div>
					</code>
				</div>
				<section><pre class="code"><code class="lang-d"><span class="pun">|      |     |         |     |            ||      |     |                  |
|      |</span><span class="pln">prev </span><span class="pun">&lt;-----------    |            ||      |     |                  |
|  </span><span class="pln">R   </span><span class="pun">|  </span><span class="pln">B  </span><span class="pun">|         |  </span><span class="pln">B  </span><span class="pun">|            ||   </span><span class="pln">R  </span><span class="pun">|  </span><span class="pln">B  </span><span class="pun">|                  |
|  </span><span class="pln">E   </span><span class="pun">|  </span><span class="pln">L  </span><span class="pun">|         |  </span><span class="pln">L  </span><span class="pun">|           </span><span class="pln">next  E  </span><span class="pun">|  </span><span class="pln">L  </span><span class="pun">|                  |
|  </span><span class="pln">G   </span><span class="pun">|  </span><span class="pln">O  </span><span class="pun">|  </span><span class="pln">DATA   </span><span class="pun">|  </span><span class="pln">O  </span><span class="pun">|   </span><span class="pln">FREE    </span><span class="pun">---&gt;  </span><span class="pln">G  </span><span class="pun">|  </span><span class="pln">O  </span><span class="pun">|       </span><span class="pln">DATA       </span><span class="pun">|
|  </span><span class="pln">I   </span><span class="pun">|  </span><span class="pln">C  </span><span class="pun">|         |  </span><span class="pln">C  </span><span class="pun">|           &lt;---  </span><span class="pln">I  </span><span class="pun">|  </span><span class="pln">C  </span><span class="pun">|                  |
|  </span><span class="pln">O   </span><span class="pun">|  </span><span class="pln">K  </span><span class="pun">|         |  </span><span class="pln">K  </span><span class="pun">|           </span><span class="pln">prev  O  </span><span class="pun">|  </span><span class="pln">K  </span><span class="pun">|                  |
|  </span><span class="pln">N   </span><span class="pun">|    -----------&gt; </span><span class="pln">next</span><span class="pun">|            ||   </span><span class="pln">N  </span><span class="pun">|     |                  |
|      |     |         |     |            ||      |     |                  |</span></code></pre>
</section>

				<section><h2>Properties</h2>
					<table>
						<col class="caption"/>
						<tr>
							<th>Name</th><th>Type</th><th>Description</th>
						</tr>
						<tr>
							<td>
								<a href="../../../dlib/memory/mmappool/MmapPool.instance.html" class="public property"><code>instance</code></a><span class="tableEntryAnnotation">[get]</span>
							</td>
							<td class="typecol"><code class="prettyprint lang-d"><a href="../../../dlib/memory/mmappool/MmapPool.html"><span class="typ">MmapPool</span></a></code></td><td>Static allocator instance and initializer.
</td>
						</tr>
						<tr>
							<td>
								<a href="../../../dlib/memory/allocator/Allocator.alignment.html" class="public inherited property"><code>alignment</code></a><span class="tableEntryAnnotation">[get]</span>
							</td>
							<td class="typecol"><code class="prettyprint lang-d"><span class="kwd">immutable</span><span class="pun">(</span><span class="typ">uint</span><span class="pun">)</span></code></td><td></td>
						</tr>
					</table>
				</section>
				<section><h2>Methods</h2>
					<table>
						<col class="caption"/>
						<tr>
							<th>Name</th><th>Description</th>
						</tr>
						<tr>
							<td>
								<a href="../../../dlib/memory/mmappool/MmapPool.allocate.html" class="public">
									<code>allocate</code>
								</a>
								<span class="tableEntryAnnotation">(size)</span>
							</td>
							<td>Allocates <i>size</i> bytes of memory.
</td>
						</tr>
						<tr>
							<td>
								<a href="../../../dlib/memory/mmappool/MmapPool.deallocate.html" class="public">
									<code>deallocate</code>
								</a>
								<span class="tableEntryAnnotation">(p)</span>
							</td>
							<td>Deallocates a memory block.
</td>
						</tr>
						<tr>
							<td>
								<a href="../../../dlib/memory/mmappool/MmapPool.reallocate.html" class="public">
									<code>reallocate</code>
								</a>
								<span class="tableEntryAnnotation">(p, size)</span>
							</td>
							<td>Increases or decreases the size of a memory block.
</td>
						</tr>
						<tr>
							<td>
								<a href="../../../dlib/memory/allocator/Allocator.allocate.html" class="public inherited">
									<code>allocate</code>
								</a>
								<span class="tableEntryAnnotation">(size)</span>
							</td>
							<td>Allocates <i>size</i> bytes of memory.
</td>
						</tr>
						<tr>
							<td>
								<a href="../../../dlib/memory/allocator/Allocator.deallocate.html" class="public inherited">
									<code>deallocate</code>
								</a>
								<span class="tableEntryAnnotation">(p)</span>
							</td>
							<td>Deallocates a memory block.
</td>
						</tr>
						<tr>
							<td>
								<a href="../../../dlib/memory/allocator/Allocator.reallocate.html" class="public inherited">
									<code>reallocate</code>
								</a>
								<span class="tableEntryAnnotation">(p, s)</span>
							</td>
							<td>Increases or decreases the size of a memory block.
</td>
						</tr>
					</table>
				</section>
				<section><h2>TODO</h2>
<p><ul>         <li>Thread safety (core.atomic.cas)</li>
         <li>If two neighbour blocks are free, they can be merged</li>
         <li>Reallocation shoud check if there is enough free space in the
              next block instead of always moving the memory</li>
         <li>Make 64 KB regions mininmal region size on Linux</li>
     </ul>
</p>
</section>

			</div>
			<footer>
				<div id="license-info">
					<p>Eugene Wissner
</p>

					<p>Eugene Wissner 2016-2019.
</p>

					<p><a href="boost.org/LICENSE_1_0.txt">Boost License 1.0</a>.
</p>

				</div>
			</footer>
		</div>
	</body>
</html>